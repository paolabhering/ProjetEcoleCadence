{{#if (eq userRole "administrateur")}}
    {{> headerAd}}
{{else if (eq userRole "professeur")}}
    {{> header}}
{{/if}}


<div class="connexion-form grey-container">
    <h2>Mon Compte</h2>
    <div class="flex-container">
        <!-- Username Display -->
        <div class="flex-item">
            <label for="username"><b>Nom :</b></label>
            <input type="text" id="username" name="username" value="{{user.username}}" readonly>
        </div>

        <!-- Email Display -->
        <div class="flex-item">
            <label for="email"><b>Email :</b></label>
            <input type="email" id="email" name="email" value="{{user.email}}" readonly>
        </div>

        <!-- Groups Display -->
        <div class="flex-item full-width">
            <label for="groups"><b>Groupe(s) :</b></label>
            <div id="userGroupsContainer">
                {{#each user.groups}}
                    <input type="text" value="{{this}}" readonly>
                {{/each}}
            </div>
        </div>

        <!-- Password Modification Section -->
        <div class="flex-item full-width">
            <h3>Modifier le mot de passe</h3>
            <form action="/update-password" method="POST">
                <div class="flex-item">
                    <label for="currentPassword"><b>Mot de passe actuel :</b></label>
                    <input type="password" id="currentPassword" name="currentPassword" placeholder="Entrez votre mot de passe actuel" required>
                </div>
                <div class="flex-item">
                    <label for="newPassword"><b>Nouveau mot de passe :</b></label>
                    <input type="password" id="newPassword" name="newPassword" placeholder="Entrez un nouveau mot de passe" required>
                </div>
                <div class="flex-item">
                    <label for="confirmPassword"><b>Confirmer le nouveau mot de passe :</b></label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirmez le nouveau mot de passe" required>
                </div>
                <button type="submit" class="btn btn_roseFonce">Mettre Ã  jour le mot de passe</button>
            </form>
        </div>

        <!-- Optional Section to Add Groups -->
        <div class="flex-item full-width">
            <h3>Ajouter des Groupes</h3>
            <form action="/add-group" method="POST">
                <div id="groupFieldsContainer">
                    <input type="text" id="newGroupName" name="groups[]" placeholder="Entrez le nom du groupe">
                </div>
                <div class="button-container">
                    <button type="button" class="add-group" onclick="addGroupField()">+</button>
                </div>
                <button type="submit" class="btn btn_roseFonce">Ajouter le(s) groupe(s)</button>
            </form>
        </div>
    </div>
</div>

<script>
    function addGroupField() {
        const groupFieldsContainer = document.getElementById("groupFieldsContainer");
        const newGroupInput = document.createElement("input");
        newGroupInput.type = "text";
        newGroupInput.placeholder = "Entrez le nom du groupe";
        newGroupInput.name = "groups[]";
        groupFieldsContainer.appendChild(newGroupInput);
    }
</script>
